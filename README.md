# Seminárka pro 4IZ278
##Skript pro databázi
```
CREATE TABLE IF NOT EXISTS EMPLOYEES (
	ID int(11) NOT NULL AUTO_INCREMENT,
	NAME varchar(50) NOT NULL,
	SURNAME varchar(50) NOT NULL,
	BIRTH date NOT NULL,
	ENTERED date,
	GONE date,
    	PASSWORD varchar(255),
	FPHASH varchar(255),
	EMAIL varchar(255) UNIQUE NOT NULL,
	PRIMARY KEY (ID)
) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS DEPARTMENTS (
	ID int(11) NOT NULL AUTO_INCREMENT,
	NAME varchar(50) NOT NULL,
	ROOM varchar(50) NOT NULL,
	BUILDING varchar(50) NOT NULL,
	HEAD_ID int(11) NOT NULL,
	DEPARTMENT_ID int(11),
	DELETED date,
	PRIMARY KEY (ID),
	FOREIGN KEY (HEAD_ID) REFERENCES EMPLOYEES(ID)
	ON DELETE RESTRICT
	ON UPDATE CASCADE
	FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENTS(ID)
	ON DELETE RESTRICT
	ON UPDATE CASCADE
) ENGINE=InnoDB;
	
CREATE TABLE IF NOT EXISTS EVENTS (
    ID int(11) NOT NULL AUTO_INCREMENT,
    NAME varchar(50) NOT NULL,
    DESCRIPTION varchar(300) NOT NULL,
    BEGINNING TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    ENDING TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CAPACITY int(11) NOT NULL,
    PLACE varchar(100),
    DELETED date,
    ORGANIZATOR_ID int(11) NOT NULL,
    PRIMARY KEY (ID),
    FOREIGN KEY (ORGANIZATOR_ID) REFERENCES DEPARTMENTS(ID)
    ON DELETE RESTRICT
    ON UPDATE CASCADE
) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS PARTICIPATIONS (
	EMPLOYEE_ID int(11) NOT NULL,
	EVENT_ID int(11) NOT NULL,
	POSTED tinyint(1),
	REPORTED tinyint(1),
	PRIMARY KEY (EMPLOYEE_ID, EVENT_ID),
	FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEES(ID)
	ON DELETE CASCADE
	ON UPDATE CASCADE,
	FOREIGN KEY (EVENT_ID) REFERENCES EVENTS(ID)
	ON DELETE CASCADE
	ON UPDATE CASCADE
) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS ASSIGNMENTS (
	EMPLOYEE_ID int(11) NOT NULL,
	DEPARTMENT_ID int(11) NOT NULL,
	BEGINNING date,
	ENDING date,
	PRIMARY KEY (EMPLOYEE_ID, DEPARTMENT_ID),
	FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEES(ID)
	ON DELETE CASCADE
	ON UPDATE CASCADE,
	FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENTS(ID)
	ON DELETE CASCADE
	ON UPDATE CASCADE
) ENGINE=InnoDB;
```